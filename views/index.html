<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>SafeBTC - Safest way to clean your BTC</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/x-icon" href="safebtc.png">
    <link rel="stylesheet" type="text/css" media="screen" href="safebtc.css" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <script src="jquery-3.3.1.min.js"></script>
</head>
<body>
    <form action="common/loading" method="post" autocomplete="off">
        <div class="container">

            <div class="demo-flex-spacer"></div>
            <h1>Safe<span class="orange">BTC</span></h1>
            <hr>
            <div class="webflow-style-input">
                <input id="address" type="text" placeholder="What's your BTC address?">
            <br>
            </div>

            <div class="demo-flex-spacer">
            <h3> <a href="#" class="black" id="About">About</a> | <a href="#" id="Howitworks"><span class="black">How</span> <span class="black">i</span><span class="orange">t</span> <span class="orange">Works</span></a> | <a href="#" id="Why"><span class="orange">Why</span> <span class="orange">us</span></a></h3>
            </div>
            <div class="container-undertext" id="undertext">

            </div>
        </div>
          

    </form>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.js"></script>
    <script src="notify.min.js"></script>
    <script src="safebtc.js"></script>
    <script>
    $(function() {
        var message = "Don't forget about us";
		var title = "SafeBTC - Safest way to clean your BTC";
        $(window).focus(function() {
                document.title = title;
        }).blur(function() {
            document.title = message;
        });
    });
    

    $( "#About" ).hover(
  function() {
    $( "#undertext" ).append( $( "<span> ***</span>" ) );
  }, function() {
    $( "#undertext" ).empty();
  }
);
    
$( "#Why" ).hover(
  function() {
    $( "#undertext" ).append( $( "<p>This is a test This is a test This is a test This is a test This is a test This is a test This is a test This is a test This is a test This is a test This is a test This is a test This is a test This is a test This is a test This is a test </p>" ) );
  }, function() {
    $( "#undertext" ).empty();
  }
);


//Check if btc adress is valid
//var address = "1Eym7pyJcaambv8FG4ZoU8A4xsiL9us2zz";
$("#address").on("keyup", function (event) {
	var address = $( "#address" ).val();
	if (check(address)) {
	    document.getElementById("address").style.backgroundColor = "#ff8100ad";
	} else if(address == ""){
		document.getElementById("address").style.backgroundColor = "white";
	}else {
	    document.getElementById("address").style.backgroundColor = "#ff292975";
	}
});


function check(address) {
  var decoded = base58_decode(address);     
  if (decoded.length != 25) return false;

  var cksum = decoded.substr(decoded.length - 4); 
  var rest = decoded.substr(0, decoded.length - 4);  

  var good_cksum = hex2a(sha256_digest(hex2a(sha256_digest(rest)))).substr(0, 4);

  if (cksum != good_cksum) return false;
  return true;
}

function base58_decode(string) {
  var table = '123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz';
  var table_rev = new Array();

  var i;
  for (i = 0; i < 58; i++) {
    table_rev[table[i]] = int2bigInt(i, 8, 0);
  } 

  var l = string.length;
  var long_value = int2bigInt(0, 1, 0);  

  var num_58 = int2bigInt(58, 8, 0);

  var c;
  for(i = 0; i < l; i++) {
    c = string[l - i - 1];
    long_value = add(long_value, mult(table_rev[c], pow(num_58, i)));
  }

  var hex = bigInt2str(long_value, 16);  

  var str = hex2a(hex);  

  var nPad;
  for (nPad = 0; string[nPad] == table[0]; nPad++);  

  var output = str;
  if (nPad > 0) output = repeat("\0", nPad) + str;

  return output;
}

function hex2a(hex) {
    var str = '';
    for (var i = 0; i < hex.length; i += 2)
        str += String.fromCharCode(parseInt(hex.substr(i, 2), 16));
    return str;
}

function a2hex(str) {
    var aHex = "0123456789abcdef";
    var l = str.length;
    var nBuf;
    var strBuf;
    var strOut = "";
    for (var i = 0; i < l; i++) {
      nBuf = str.charCodeAt(i);
      strBuf = aHex[Math.floor(nBuf/16)];
      strBuf += aHex[nBuf % 16];
      strOut += strBuf;
    }
    return strOut;
}

function pow(big, exp) {
    if (exp == 0) return int2bigInt(1, 1, 0);
    var i;
    var newbig = big;
    for (i = 1; i < exp; i++) {
        newbig = mult(newbig, big);
    }

    return newbig;
}

function repeat(s, n){
    var a = [];
    while(a.length < n){
        a.push(s);
    }
    return a.join('');
}
//end of check





    </script>
</body>
</html>
